<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet" />
  <title>electronic cigarettes</title>
  <style>
    body {
      background-color: #fbdfc7;
      color: #333333;
      font-family: "Prompt", sans-serif;
      padding: 50px;
      cursor: pointer;
      user-select: none;
      -webkit-user-select: none;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      width: 100vw;
      height: 100vh;
    }


    img {
      max-width: 100%;
      height: auto;
    }

    h3,
    h4 {
      line-height: 1.6;
    }

    h4 {
      color: #373737;
    }


    @media (max-width: 576px) {
      h2 {
        font-size: 1.6rem;
      }

      h3 {
        font-size: 1.3rem;
      }

      h4 {
        font-size: 1.2rem;
      }

      .quote {
        font-size: 0.95rem;
      }

      .arrow-text {
        padding: 1rem 2rem;
        font-size: 1.2rem;
      }
    }

    .arrow-text {
      display: inline-block;
      padding: 1.5rem 3rem;
      font-size: 1.5rem;
      color: #7c7c7cc1;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.2s, transform 0.2s;
      border-radius: 0.5rem;
      user-select: none;
      cursor: pointer;
    }

    .arrow-text:hover {
      color: #555;
      transform: scale(1.1);
    }

    #section1,
    #section2,
    #section3,
    #section4,
    #section5,
    #section6,
    #section7,
    #section8,
    #section9 {
      display: none !important;
      margin-top: 1.5rem;
    }

    #section1.active,
    #section2.active,
    #section3.active,
    #section4.active,
    #section5.active,
    #section6.active,
    #section7.active,
    #section8.active,
    #section9.active {
      display: block !important;
    }

    .submit-btn {
      background-color: #333;
      color: white;
      border: 2px solid #333;
      font-weight: 600;
      font-size: 1.2rem;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .submit-btn:hover {
      background-color: rgb(125, 124, 124);
      color: #333;
      border-color: #333;
      cursor: pointer;
    }

    .submit-btn:active {
      background-color: #555;
      color: white;
      border-color: #555;
      transform: scale(0.98);
    }

    /* ปรับ form ให้พอดีจอเล็ก */
    #section3 form {
      max-width: 400px;
      margin: 0 auto;
      border-radius: 12px;
      user-select: text;
      cursor: auto;
      padding: 0 0.5rem;
    }

    #section3 form label {
      font-weight: 600;
      color: #000000;
    }

    #section3 form input,
    #section3 form select {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border: 2px solid #000000;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
      font-family: "Prompt", sans-serif;
    }

    .quote {
      line-height: 1.8;
      text-align: center;
      max-width: 700px;
      margin: auto;
      color: #000000;

    }

    .m {
      margin-top: 130px;
    }

    .m2 {
      margin-top: 300px;
    }

    .bg {
      background-image: url('/public/img/2.1.png'), url('/public/img/2.2.png');
      background-size: 8rem, 8rem;
      background-repeat: no-repeat, no-repeat;
      background-position: bottom left, bottom right;
      width: 95vw;
      height: 95vh;
      margin: 0;
      padding: 0;
    }
 .bg2 {
  background-image: url('/public/img/6.png'), url('/public/img/7.png');
  background-size: 20rem, 20rem;
  background-repeat: no-repeat, no-repeat;
  background-position: left 1% top 300px, right 1% top 400px; /* เว้นเป็น % */
  width: 95vw;
  height: 95vh;
  margin: 0;
  padding: 25px;
}
.bg3 {
  background-image: url('/public/img/8.png'), url('/public/img/9.png');
  background-size: 20rem, 20rem;
  background-repeat: no-repeat, no-repeat;
  background-position: right 1% top 400px, left 1% top 300px; /* เว้นเป็น % */
  width: 95vw;
  height: 95vh;
  margin: 0;
  padding: 25px;
}




  </style>

</head>

<body>

  <!-- ส่วนที่ 1 -->
  <div class=" text-center" id="section1">
    <img src="/public/img/smok.png" class="img-fluid mb-4" alt="No Smoke Logo" style="max-height: 120px;" />

    <h2 class="fw-bold">
      ผลของโปรแกรม SOC ทำพิชิตชีวิตไร้ควัน
    </h2>

    <h2 class="mt-4 quote">
      "บุหรี่ไม่ใช่แค่เรื่องส่วนตัว แต่กระทบต่อสุขภาพและคนรอบข้าง
      ชีวิตสอนให้เราเห็นการป้องกันสำคัญกว่าการแก้ไข"
    </h2>

    <h6 class="m">
      *เนื้อหาในเว็บนี้เป็นผลงานการออกแบบการสื่อสาร
      ให้ความรู้ผ่านการให้ผู้เล่นมีส่วนร่วมในการตอบคำถาม
    </h6>

    <div class="mt-3">
      <a href="#" id="nextBtn1" class="arrow-text">&gt;&gt;&gt;</a>
    </div>
  </div>

  <!-- ส่วนที่ 2 -->

  <div class="text-center bg" id="section2">

    <h1 class="fw-bold mt-5" style="color: #222222;">
      งานนี้เป็นส่วนหนึ่งของวิจัย
    </h1>
    <h3 class="my-2 quote">
      “ผลของเกม SOC ท้าพิชิตชีวิตไร้ควันต่อทัศนคติและพฤติกรรม
      การป้องกันการสูบบุหรี่ไฟฟ้าในนักเรียนชั้นมัธยมศึกษาตอนต้น”
    </h3>

    <h5 class="m">
      โดยนักศึกษาพยาบาลชั้นปีที่ 3<br />
      วิทยาลัยพยาบาลบรมราชชนนีแพร่
    </h5>

    <div class="mt-5">
      <a href="#" id="nextBtn2" class="arrow-text">แตะเพื่อไปต่อ</a>
    </div>
  </div>

  <!-- ส่วนที่ 3 -->
  <div id="section3" class="container">
    <h3 class="fw-bold mb-4 text-center" style="color: #222222;">กรุณากรอกข้อมูลของคุณ</h3>
    <form id="profileForm">
        <div class="mb-3">
            <label for="nameInput" class="form-label">ชื่อ</label>
            <input type="text" class="form-control" id="nameInput" placeholder="กรอกชื่อของคุณ" required />
        </div>
        <div class="mb-3">
            <label for="ageInput" class="form-label">อายุ</label>
            <input type="number" class="form-control" id="ageInput" placeholder="กรอกอายุของคุณ" min="1" max="120" required />
        </div>
        <div class="mb-3">
            <label for="genderSelect" class="form-label">เพศ</label>
            <select class="form-select" id="genderSelect" required>
                <option value="" selected disabled>เลือกเพศ</option>
                <option value="ชาย">ชาย</option>
                <option value="หญิง">หญิง</option>
                <option value="อื่นๆ">อื่นๆ</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary w-100 submit-btn mt-3">แตะเพื่อไปต่อ</button>
    </form>
</div>
  <!-- ส่วนที่ 4 -->
  <div class="container text-center" id="section4">
    <h2 class="fw-bold mb-5" style="color: #222222;">
      รู้จักบุหรี่ไฟฟ้าหรือไม่
    </h2>
    
    <div class="d-flex justify-content-center gap-3 mt-4">
      <button id="btnUnderstand" type="button" class="btn btn-outline-success fw-semibold me-5"
        style="min-width: 140px; border-radius: 8px; padding: 0.75rem 2rem; font-size: 1.25rem;">
        รู้จัก
      </button>
      <button id="btnNotUnderstand" type="button" class="btn btn-outline-danger fw-semibold"
        style="min-width: 140px; border-radius: 8px; padding: 0.75rem 2rem; font-size: 1.25rem;">
        ไม่รู้จัก
      </button>
    </div>
  </div>

  <!-- ส่วนที่ 5 -->
  <div class=" text-center pt-5" id="section5" style="max-width: 700px;">
    <h1 class="fw-bold my-4" style="color: #222222;">
      บุหรี่ไฟฟ้า
    </h1>
    <div class="mb-4 p-3 rounded-3 border border-dark">
      <p class="fs-5 mb-0">
        <span class="text-danger fw-bold">บุหรี่ไฟฟ้า</span>
        คือผลิตภัณฑ์ยาสูบรูปแบบใหม่ที่ใช้แบตเตอรี่ทำให้เกิดความร้อนเพื่อระเหยน้ำยาในบุหรี่ไฟฟ้าให้เป็นละอองลอยโดยไม่มีการเผาไหม้
        ผู้สูบบุหรี่ไฟฟ้าจะสูดละอองลอยผ่านระบบทางเดินหายใจ ในน้ำยาบุหรี่ไฟฟ้ามีสารเคมีสำคัญหลายชนิด ได้แก่
      </p>
    </div>
  </div>

  <!-- ส่วนที่ 6 -->
  <div class=" text-center pt-5 bg2" id="section6" style="max-width: 700px;">
    <div class="mb-4 p-3 rounded-3 border border-dark">
      <p class="fs-5 mb-0">
        <span class="text-danger fw-bold">🚬 นิโคติน</span> เป็นสารเสพติดที่เพิ่มการหลั่งของสารโดปามีนในสมองทําให้
        ผู้สูบบุหรี่ไฟฟ้าเสพติด และมีผลต่อร่างกายในการเพิ่มความดันโลหิตและเพิ่มอัตราการเต้นของหัวใจ
        ทําให้หัวใจทํางานหนักขึ้นเสี่ยงต่อหัวใจวายเฉียบพลัน
      </p>
    </div>
  </div>

  <!-- ส่วนที่ 7 -->
  <div class=" text-center pt-5 bg3" id="section7" style="max-width: 700px;">
    <div class="mb-4 p-3 rounded-3 border border-dark">
      <p class="fs-5 mb-0">
        <span class="text-danger fw-bold">🍃 สารปรุงแต่งกลิ่นรสชาติ</span> เพื่อจูงใจให้เยาวชนอยากลอง
        สูบบุหรี่ไฟฟ้า สารปรุงแต่งกลิ่นรสชาติจะทําให้เกิดการระคายเคืองของปอดที่เรียกว่าป๊อปคอร์น ลัง โดย
        เฉพาะกลิ่นอบเชย และเชอรี่จะมีอันตรายมากที่สุด
      </p>
    </div>
  </div>
  <!-- ส่วนที่ 8 -->
  <div class="container text-center py-2" id="section8">
    <h2 class="fw-bold mt-5" style="color: #222222;">
      เด็กๆเข้าใจกันไหมคะ ?
    </h2>
    <img src="/public/img/3.png" class="img-fluid mb-3" alt="cat" style="max-height: 600px;" />
    <h6 class="text-danger">*ถ้าไม่เข้าใจไปดูสรุปเนื้อหากันอีกรอบ</h6>
    <div class="d-flex justify-content-center gap-3 mt-4">
      <button id="btnUnderstand2" type="button" class="btn btn-outline-success fw-semibold me-5"
        style="min-width: 140px; border-radius: 8px; padding: 0.75rem 2rem; font-size: 1.25rem;">
        เข้าใจ
      </button>
      <button id="btnNotUnderstand2" type="button" class="btn btn-outline-danger fw-semibold"
        style="min-width: 140px; border-radius: 8px; padding: 0.75rem 2rem; font-size: 1.25rem;">
        ไม่เข้าใจ
      </button>
    </div>

    <div class="mt-5">
      <!-- <a href="#" id="nextBtn8" class="arrow-text">ไปต่อ</a> -->
    </div>
  </div>

  <!-- ส่วยที่9 -->
  <div class="container text-center py-5" id="section9">
    <div class="container text-center py-5"
      style="max-width: 700px; margin-top: 3rem; border: 2px dashed #a67c00; border-radius: 12px; background: #fff8e1;">
      <h2 class="fw-bold mb-4 quote" style="color: #8b6d00; font-size: 2rem;">
        แล้วหลักการปฏิเสธที่มีประสิทธิภาพน้องๆคิดว่าเป็นแบบไหนล่ะ ??
      </h2>
      <h4 class="fw-semibold mt-5" style="color: #b38600;">
        โปรดติดตามกิจกรรมครั้งต่อไปน้าาา <span style="font-size: 1.5rem;">✨</span>
      </h4>
    </div>
    <!-- <div class="mt-5">
      <a href="part1.html" class="arrow-text">กลับไปหน้าแรก</a>
    </div> -->

  </div>

  <script>
    // ไฮไลท์ปุ่มที่เลือก
    const answerButtons = document.querySelectorAll('#section8 .answer-btn');

    answerButtons.forEach(btn => {
      btn.addEventListener('click', function () {
        // เอาคลาส active ออกจากปุ่มทุกปุ่ม
        answerButtons.forEach(b => b.style.background = '#fff');
        answerButtons.forEach(b => b.style.color = '#333');

        // ไฮไลท์ปุ่มที่คลิก
        this.style.background = '#dfc4aa';
        this.style.color = '#333';

        // ไป section ถัดไปหลังเลือก
        const nextId = this.dataset.next;
        if (nextId) {
          document.getElementById('section8').classList.remove('active');
          document.getElementById(nextId).classList.add('active');
        }
      });
    });
    // เริ่มต้นแสดง section1
    document.getElementById('section1').classList.add('active');

    function setupNextButton(nextBtnId, currentSectionId, nextSectionId) {
      document.getElementById(nextBtnId).addEventListener('click', function (e) {
        e.preventDefault();
        document.getElementById(currentSectionId).classList.remove('active');
        document.getElementById(nextSectionId).classList.add('active');
      });
    }

    setupNextButton('nextBtn1', 'section1', 'section2');
    setupNextButton('nextBtn2', 'section2', 'section3');

    // setupNextButton('nextBtn5', 'section5', 'section6');
    // setupNextButton('nextBtn6', 'section6', 'section7');
    // setupNextButton('nextBtn7', 'section7', 'section8');
    // setupNextButton('nextBtn8', 'section8', 'section9');

    // กำหนด event submit สำหรับฟอร์มที่ section3
    const form = document.querySelector('#section3 form');
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      if (form.checkValidity()) {
        document.getElementById('section3').classList.remove('active');
        document.getElementById('section4').classList.add('active');
      } else {
        form.reportValidity();
      }
    });

    // แตะพื้นที่ว่างเพื่อไปต่อ (skip) ยกเว้นตอนกรอกฟอร์ม
    document.body.addEventListener('click', function (e) {
      const activeSectionIds = [
        'section1', 'section2', 'section3', 'section4', 'section5',
        'section6', 'section7', 'section8', 'section9'
      ];

      const nextBtns = activeSectionIds
        .map(id => document.querySelector(`#${id} .arrow-text`))
        .filter(el => el !== null);

      // ถ้าแตะปุ่ม next หรืออยู่ในฟอร์ม ไม่ต้องทำอะไร
      if (
        nextBtns.some(btn => btn.contains(e.target)) ||
        form.contains(e.target)
      ) {
        return;
      }

      // หาดูว่าตอนนี้อยู่ section ไหน active
      let currentIndex = activeSectionIds.findIndex(id => document.getElementById(id).classList.contains('active'));
      if (currentIndex === -1) return;

      // ถ้าอยู่ section3 (ฟอร์ม) ห้ามแตะพื้นที่ว่างข้ามไป ////////////////////////////////////////////////////
      if (activeSectionIds[currentIndex] === 'section3') {
        return;
      }
      if (activeSectionIds[currentIndex] === 'section4') {
        return;
      }
      if (activeSectionIds[currentIndex] === 'section8') {
        return;
      }
      if (activeSectionIds[currentIndex] === 'section9') {
        return;
      }

      if (activeSectionIds[currentIndex] === 'section7') {
        window.location.href = "quiz.html";
        return;
      }
      // ซ่อน section ปัจจุบัน
      document.getElementById(activeSectionIds[currentIndex]).classList.remove('active');

      // แสดง section ถัดไป
      if (currentIndex + 1 < activeSectionIds.length) {
        document.getElementById(activeSectionIds[currentIndex + 1]).classList.add('active');
      }
    });

    document.getElementById('btnNotUnderstand').addEventListener('click', function (e) {
      e.stopPropagation(); // ป้องกันไม่ให้ event เด้งไป body
      document.getElementById('section4').classList.remove('active');
      document.getElementById('section5').classList.add('active');
    });

    document.getElementById('btnUnderstand').addEventListener('click', function (e) {
      e.stopPropagation(); // กันไม่ให้ข้าม section9
      document.getElementById('section4').classList.remove('active');
      document.getElementById('section5').classList.add('active');
    });

    document.getElementById('btnNotUnderstand2').addEventListener('click', function (e) {
      e.stopPropagation(); // กันไม่ให้คลิกทะลุไป body
      window.location.hash = 'section4';
    });
 document.getElementById('btnUnderstand2').addEventListener('click', function (e) {
      e.stopPropagation(); // กันไม่ให้คลิกทะลุไป body
      window.location.hash = 'section9';
    });


    // document.getElementById('btnUnderstand2').addEventListener('click', function (e) {
    //   e.stopPropagation(); // กันไม่ให้ข้าม section9
    //   document.getElementById('section8').classList.remove('active');
    //   document.getElementById('section4').classList.add('active');
    // });
    // ถ้าเปิดมาพร้อม hash #section9 ให้แสดง section9 เลย
    // เปิด section ตาม hash อัตโนมัติ
    // ฟังก์ชันเปิด section ตาม hash
    function openSectionFromHash() {
      const hash = window.location.hash.replace('#', '');
      if (hash) {
        const allSections = document.querySelectorAll(
          '#section1, #section2, #section3, #section4, #section5, #section6, #section7, #section8, #section9'
        );
        allSections.forEach(sec => sec.classList.remove('active'));

        const targetSection = document.getElementById(hash);
        if (targetSection) {
          targetSection.classList.add('active');
        }
      }
    }

    // เรียกทันทีตอนโหลดหน้า
    openSectionFromHash();

    // ถ้า hash เปลี่ยนระหว่างอยู่ในหน้า → อัปเดต section
    window.addEventListener('hashchange', openSectionFromHash);

document.getElementById('profileForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const name = document.getElementById('nameInput').value.trim();
    const age = parseInt(document.getElementById('ageInput').value);
    const gender = document.getElementById('genderSelect').value;

    if (!name || !age || !gender) {
        alert('กรุณากรอกข้อมูลให้ครบ');
        return;
    }

    try {
        const res = await fetch('http://localhost:3000/save-profile', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, age, gender })
        });

        const data = await res.json();
        if (data.success) {
          
            // เก็บ id ไว้ใน localStorage ถ้าต้องการใช้ต่อ
            localStorage.setItem('profileId', data.profileId);
            // ไปหน้าถัดไป
  
        } else {
            alert(data.message || 'เกิดข้อผิดพลาด');
        }
    } catch (err) {
        console.error(err);
       
    }
});

  </script>

</body>

</html>